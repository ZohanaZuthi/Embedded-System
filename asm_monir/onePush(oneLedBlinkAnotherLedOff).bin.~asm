; PB0 pressed  ? PA0 blink, PA1 OFF
; PB0 released ? PA0 OFF, PA1 ON

DATA SEGMENT
PORTA     EQU 00H
PORTB     EQU 02H
PORTC     EQU 04H
PORT_CON  EQU 06H
DATA ENDS

CODE SEGMENT
ASSUME CS:CODE, DS:DATA
ORG 0000H

START:
MOV AX, DATA
MOV DS, AX

; Configure 8255: Port A = Output, Port B = Input
MOV DX, PORT_CON
MOV AL, 82H
OUT DX, AL

MAIN_LOOP:
; Read PB0 (bit 0)
MOV DX, PORTB
IN AL, DX
AND AL, 01H
CMP AL, 01H
JE BLINK_MODE     ; PB0 pressed

; --- PB0 released ---
; Ensure PA0 OFF, PA1 ON ? 00000010b = 02H
MOV AL, 02H
MOV DX, PORTA
OUT DX, AL
CALL DELAY
JMP MAIN_LOOP

BLINK_MODE:
; PA0 ON (bit 0), PA1 OFF (bit 1 = 0) ? 00000001b
MOV AL, 01H
MOV DX, PORTA
OUT DX, AL
CALL DELAY

; Both OFF
MOV AL, 00H
OUT DX, AL
CALL DELAY

JMP MAIN_LOOP

; --- Better Visible Delay ---
DELAY:
MOV CX, 0FFFFH
D1: LOOP D1
RET

CODE ENDS
END START


